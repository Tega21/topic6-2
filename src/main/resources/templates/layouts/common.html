<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title th:text="${title} ?: 'CST-339 Spring Boot App'">CST-339 Spring Boot App</title>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}">
</head>

<body>

<!-- HEADER -->
<div layout:fragment="header">
    <h1 style="text-align: center;">Welcome to my CST-339 Spring Boot Activity Application</h1>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <!-- Show Login link if not authenticated -->
            <a sec:authorize="!isAuthenticated()" class="navbar-brand" th:href="@{/login}">Go to Login</a>

            <!-- Show user info and logout if authenticated -->
            <div sec:authorize="isAuthenticated()" class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    Welcome, <span sec:authentication="name">User</span>!
                </span>
                <form th:action="@{/logout}" method="post" style="display:inline">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-link p-0">Log Out</button>
                </form>
            </div>
        </div>
    </nav>

    <h2 th:text="${title}">Default Title</h2>

    <div style="text-align: center;">
        <img th:src="@{/images/gcu-logo.png}" alt="GCU Logo" width="200" />
    </div>

</div>

<!-- CONTENT SLOT -->
<section layout:fragment="content">
    <p>This is the default content area.</p>
</section>

<!-- FOOTER -->
<div layout:fragment="footer">
    <h5 style="text-align: center; position: fixed; bottom: 0; width: 100%;">
        &copy; 2020 Grand Canyon University
    </h5>
</div>

</body>
</html>